<!DOCTYPE html>
<html>
	<head>
		<title>Frogger</title>
	</head>
	<div id="score">0</div>
	<canvas id="gCanvas" width="600" height="600"></canvas>


	<script>

		var gCanvas = document.getElementById("gCanvas");

		var ctx = gCanvas.getContext("2d");

		const canvasFillColor = 'white';
		const canvasStrokeColor = 'black';

		ctx.fillStyle='canvasFillColor';
		ctx.strokeStyle='canvasStrokeColor';

		const width = gCanvas.width;
		const height = gCanvas.height;

		// fill out border of canvas
		ctx.strokeRect(0, 0, width, height);

		let dx = 10; // initial speed

		let score = 0;

		// create frog
		const frogHeight = 30;
		const frogWidth = 30;
		var frogX = Math.floor((width/2) - (frogWidth/2));
		var frogY = height - frogHeight;

		const row1Width = 100;
		const row1Height = 50;
		var row1dx = 20; // speed of row1

		// create row 1 objects
		let row1Boxes = [
			{x: 150, y: 450},
			{x: 400, y: 450},
		];		


		main();

		document.addEventListener("keydown", move);

		function resetFrogPosition() { 
			frogX = Math.floor((width/2) - (frogWidth/2));
			frogY = height - frogHeight;

			clearCanvas();
			drawFrog();

		}

		function incrementScore(){
			score++;
			document.getElementById('score').innerHTML = score;
		}

		function drawFrog(){
			ctx.fillStyle='lightgreen';

			ctx.fillRect(frogX, frogY, frogWidth, frogHeight);
		}

		function clearCanvas(){
			ctx.fillStyle='white';

			ctx.fillRect(0,0,width,height);
			ctx.strokeRect(0, 0, width, height);
		}


		function move(event) {
			// set key codes
			const LEFT = 37;
			const UP = 38;
			const RIGHT = 39;
			const DOWN = 40;

			const key = event.keyCode;

			if(key == LEFT && frogX > 0){
				frogX -= 10;
			}
			else if(key == RIGHT && frogX < (width-frogWidth)){
				frogX += 10;
			}
			else if(key == UP && frogY > 0){
				frogY -= 10;
			}
			else if(key == DOWN && frogY < (height-frogHeight)){
				frogY += 10;
			}

			if(frogY <= 0){
				// then we reached the end
				incrementScore();

				resetFrogPosition();
			}

			clearCanvas();
			drawFrog();
		}


		function drawRow1() {
			ctx.fillStyle = 'blue'

			ctx.fillRect(row1Boxes[0].x += row1dx, row1Boxes[0].y, row1Width, row1Height);
			ctx.fillRect(row1Boxes[1].x += row1dx, row1Boxes[1].y, row1Width, row1Height);


		}	

		function main() {
			setTimeout(function onStep() {
				clearCanvas();
				drawFrog();

				drawRow1();

				main();
			}, 100)
		}


		// TODO: create 'enemy' boxes 



	</script>
</html>